{% load static %}

<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link href="https://cdn.jsdelivr.net/npm/prismjs/themes/prism.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-python.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-markup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/components/prism-javascript.min.js"></script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}NossoTrello{% endblock %}</title>

    <!-- Favicon -->
    <link rel="shortcut icon"
        href="https://d9hhrg4mnvzow.cloudfront.net/lp.camim.com.br/7c264685-logo-topo_101x01x000000000000000.png"
        type="image/png">

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- SortableJS -->
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- CSS Global -->
    <link rel="stylesheet" href="{% static 'boards/base.css' %}">
    <link rel="stylesheet" href="{% static 'boards/columns.css' %}">

    <!-- QUILL -->
    <link href="https://cdn.quilljs.com/1.3.7/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.7/quill.min.js"></script>
    <link href="{% static 'boards/quill.css' %}" rel="stylesheet">

    <!-- CSRF -->
    <meta name="csrf-token" content="{{ csrf_token }}">
    <script>
        document.addEventListener("htmx:configRequest", (event) => {
            const csrfToken = document.querySelector("meta[name='csrf-token']").content;
            event.detail.headers['X-CSRFToken'] = csrfToken;
        });
    </script>

    <!-- CSS dinamico: home_wallpaper_css OU board_wallpaper_css -->
    {% block extra_css %}{% endblock %}
</head>


<body class="min-h-screen p-6
    {% if home_bg %} home-background {% endif %}" {% if home_bg and home_bg_image %} style="
            background-image: url('{% static 'images/home/' %}{{ home_bg_image }}');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        " {% elif home_bg %} style="background-color: #000;" {% endif %}>

    <!-- Header -->
    <header class="w-full flex justify-end items-center mb-6">
        <img src="{% static 'images/logo-camim.png' %}" alt="Logo Camim" class="h-20 w-auto object-contain">
    </header>

    {% block content %}{% endblock %}

    <!-- Modal Global -->
    <div id="modal" class="fixed inset-0 flex items-center justify-center hidden">
        <div
            class="bg-white/95 backdrop-blur-md rounded-2xl shadow-2xl w-4/5 max-w-5xl h-[92vh] overflow-hidden flex flex-col">

            <div class="flex justify-end items-center p-2 gap-3 border-b border-gray-200 bg-white/80 backdrop-blur-sm">

                <button type="button" class="text-gray-500 hover:text-gray-900 text-lg" title="Tela cheia"
                    onclick="cardToggleFull()">
                    â›¶
                </button>

                <button onclick="refreshCardSnippet(window.currentCardId); closeModal();"
                    class="text-gray-500 hover:text-gray-900 text-xl">
                    X
                </button>
            </div>

            <div id="modal-body" class="flex-1 overflow-y-auto px-4 pb-4"></div>
        </div>
    </div>



    <script src="{% static 'boards/modal.js' %}"></script>

</body>

</html>