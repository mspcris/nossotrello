<div class="home-group-block rounded-xl bg-white/20 backdrop-blur-md border border-white/20 p-4"
     data-group-id="{{ g.id }}">

  <div class="flex items-center justify-between gap-3 mb-3">
    <div class="flex items-center gap-2 min-w-0">
      {% if g.is_favorites %}
        <h3 class="text-base font-semibold truncate">⭐ {{ g.name }}</h3>
      {% else %}
        <h3 class="text-base font-semibold truncate">{{ g.name }}</h3>
      {% endif %}
    </div>

    {% if not g.is_favorites %}
      <div class="flex items-center gap-2 shrink-0">
        <button type="button"
                class="text-xs underline text-white/90"
                onclick="HomeGroups.renameGroup({{ g.id }}, '{{ g.name|escapejs }}')">
          Renomear
        </button>

        <button type="button"
                class="text-xs underline text-red-200"
                onclick="HomeGroups.deleteGroup({{ g.id }})">
          Apagar
        </button>
      </div>
    {% endif %}
  </div>

  <div class="home-group-dropzone"
       data-group-id="{{ g.id }}">
    <div class="flex flex-wrap gap-6"
         id="home-group-items-{{ g.id }}">
      {% if items %}
        {% for it in items %}
          {% with board=it.board %}
            <div class="board-card relative w-64 cursor-pointer shadow-lg p-6 rounded-xl flex flex-col gap-3"
                 data-board-id="{{ board.id }}">

              <div class="absolute top-2 right-2 flex gap-2">
                <button type="button"
                        class="text-lg"
                        onclick="HomeGroups.toggleFavorite({{ board.id }}, this)"
                        aria-label="Favoritar">
                  {% if board.id in favorite_board_ids %}★{% else %}☆{% endif %}
                </button>

                <button type="button"
                        class="text-xs underline text-red-300"
                        onclick="HomeGroups.removeFromGroup({{ g.id }}, {{ board.id }}, this)">
                  Remover
                </button>
              </div>

              <a href="{% url 'boards:board_detail' board.id %}">
                <h2 class="text-xl font-bold home-card-text">{{ board.name }}</h2>
                <p class="text-sm home-card-sub">Organizado aqui</p>
              </a>
            </div>
          {% endwith %}
        {% endfor %}
      {% else %}
        <div class="text-gray-300 backdrop-blur-lg px-4 py-2 rounded-lg">
          Arraste quadros aqui para organizar.
        </div>
      {% endif %}
    </div>
  </div>
</div>
