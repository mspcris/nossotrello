{# templates/boards/partials/checklist_item.html #}

<div id="checklist-item-{{ item.id }}"
     class="checklist-item flex items-start gap-2 py-2"
     data-item-id="{{ item.id }}">

  <!-- handle (drag) -->
  <button type="button"
          class="item-drag checklist-handle"
          title="Arrastar para reordenar"
          aria-label="Arrastar">
    ⋮⋮
  </button>

  <!-- checkbox -->
  <input
    type="checkbox"
    class="checklist-checkbox mt-1"
    hx-post="{% url 'boards:checklist_toggle_item' item.id %}"
    hx-target="#checklist-item-{{ item.id }}"
    hx-swap="outerHTML"
    {% if item.is_done %}checked{% endif %}
  >

  <!-- inline edit -->
  <form class="flex-1"
        hx-post="{% url 'boards:checklist_update_item' item.id %}"
        hx-trigger="change, keyup[key=='Enter']"
        hx-target="#checklist-item-{{ item.id }}"
        hx-swap="outerHTML">
    <input
      type="text"
      name="text"
      value="{{ item.text }}"
      class="checklist-input w-full
             {% if item.is_done %}is-done{% endif %}"
      placeholder="Escreva uma tarefa…"
    >
  </form>

  <!-- ações -->
  <button
    type="button"
    class="item-del checklist-icon-btn"
    title="Remover item"
    hx-post="{% url 'boards:checklist_delete_item' item.id %}"
    hx-target="#checklist-list"
    hx-swap="innerHTML">
    ✕
  </button>

</div>
