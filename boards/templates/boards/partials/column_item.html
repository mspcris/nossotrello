<div class="relative w-72 flex-shrink-0 rounded-xl shadow-lg overflow-hidden
            column-glass {{ column.theme|default:'gray'|add:'-column-bg' }}">

    <!-- Header -->
    <div class="column-header flex items-center justify-between px-4 py-2 
                border-b border-white/40 sticky top-0 z-10">

        <span class="text-gray-800 font-semibold truncate">
            {{ column.name }}
        </span>

        <div class="flex items-center gap-2">

            <!-- Botão adicionar card -->
            <button class="text-gray-700 hover:text-gray-900 px-2 py-1 rounded-lg 
                           bg-white/20 backdrop-blur-sm border border-white/40 transition"
                hx-get="{% url 'boards:add_card' column.id %}" hx-target="#form-col-{{ column.id }}"
                hx-swap="innerHTML">
                + Card
            </button>

            <!-- Menu [...] -->
            <div class="relative">

                <button class="px-2 py-1 rounded-lg bg-white/20 border border-white/40 
                               text-gray-700 hover:text-gray-900 backdrop-blur-sm transition"
                    onclick="toggleMenu('{{ column.id }}')">
                    ⋮
                </button>

                <div id="col-menu-{{ column.id }}" class="hidden absolute right-0 mt-2 w-48 rounded-lg shadow-lg
                            bg-white/90 backdrop-blur-md border border-gray-300 p-3 z-20">

                    <p class="text-xs text-gray-600 mb-2">Cor da coluna:</p>

                    <div class="grid grid-cols-5 gap-2">

                        {% for value, label in column.THEME_CHOICES %}
                        <div class="w-7 h-7 rounded-full cursor-pointer border border-gray-300 hover:scale-110 transition"
                            style="background-color: var(--{{ value }}-color);"
                            hx-post="{% url 'boards:set_column_theme' column.id %}" hx-vals='{"theme": "{{ value }}"}'
                            hx-target="closest .column-glass" hx-swap="outerHTML">
                        </div>
                        {% endfor %}

                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- Lista de Cards -->
    <ul id="cards-col-{{ column.id }}" class="p-4 space-y-3">

        <li class="no-cards-msg text-gray-400 text-sm" {% if column.cards.count %}style="display:none" {% endif %}>
            Nenhum card ainda.
        </li>

        {% for card in column.cards.all %}
        {% include "boards/partials/card_item.html" %}
        {% endfor %}
    </ul>

    <div id="form-col-{{ column.id }}" class="p-4"></div>

</div>

<script>
    function toggleMenu(colId) {
        let el = document.getElementById("col-menu-" + colId);
        el.classList.toggle("hidden");
    }
</script>