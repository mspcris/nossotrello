/* modal.css */

.is-hidden { display: none !important; }

/* Nova Atividade: fechado por padrão */
#cm-activity-composer { display: none; }
#cm-activity-gap { display: none; }

/* aberto quando o botão liga */
#cm-activity-composer.is-open { display: block; }
#cm-activity-gap.is-open { display: block; }

/* ============================================================
   Etiquetas — UI (chips) no modal
   ============================================================ */

#card-modal-root .cm-tag-catalog { margin-top: 10px; }

#card-modal-root .cm-tag-create{
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}

#card-modal-root .cm-tag-create input{ flex: 1; }

#card-modal-root .cm-tag-list{
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

#card-modal-root .cm-tag-chip{
  padding: 4px 10px;
  border-radius: 999px;
  background: rgba(0,0,0,0.08);
  border: 1px solid rgba(0,0,0,0.10);
  cursor: pointer;
  font-size: 0.92em;          /* escala com AA */
  line-height: 1.2;
  position: relative;
  user-select: none;
}

#card-modal-root .cm-tag-chip:hover{
  background: rgba(0,0,0,0.13);
}

#card-modal-root .cm-tag-chip .cm-tag-remove{
  display: none;
  position: absolute;
  top: -6px;
  right: -6px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  background: #e11d48;
  color: #fff;
  font-size: 11px;
  line-height: 16px;
  text-align: center;
  cursor: pointer;
}

#card-modal-root .cm-tag-list.delete-mode .cm-tag-remove{ display: block; }



















/* ============================================================
   THEME TOKENS (fonte única de verdade)
   - aplique em #modal (ou #cm-root) via data-theme
   ============================================================ */

#modal {
  --cm-bg: #f4f5f7;          /* fundo geral (Trello-ish) */
  --cm-surface: #ffffff;     /* cards/painéis */
  --cm-surface-2: #f9fafb;   /* inputs/áreas secundárias */
  --cm-border: rgba(9,30,66,.12);
  --cm-text: #172b4d;
  --cm-muted: #6b778c;
  --cm-shadow: 0 8px 24px rgba(9,30,66,.12);

  /* “aero” (só usado no modo aero) */
  --cm-glass: rgba(255,255,255,.72);
  --cm-glass-strong: rgba(255,255,255,.88);
  --cm-backdrop: blur(10px) saturate(130%);
}

/* DARK: escuro bonito (não chapado) */
#modal[data-theme="dark"] {
  --cm-bg: #0f141a;
  --cm-surface: #161c24;
  --cm-surface-2: #1b2330;
  --cm-border: rgba(255,255,255,.08);
  --cm-text: #e6edf3;
  --cm-muted: rgba(230,237,243,.65);
  --cm-shadow: 0 10px 30px rgba(0,0,0,.45);

  --cm-glass: rgba(22,28,36,.70);
  --cm-glass-strong: rgba(22,28,36,.88);
  --cm-backdrop: blur(12px) saturate(125%);
}

/* AERO: mantém “glass” sem virar branco sólido */
#modal[data-theme="aero"] {
  --cm-bg: rgba(244,245,247,.70);
  --cm-surface: var(--cm-glass-strong);
  --cm-surface-2: var(--cm-glass);
  --cm-border: rgba(9,30,66,.14);
  --cm-text: #172b4d;
  --cm-muted: #5e6c84;
  --cm-shadow: 0 10px 30px rgba(9,30,66,.20);
}



/* Fundo do modal */
#modal-body.card-modal-scroll,
#modal #card-modal-root,
#modal .cm-mode {
  background: var(--cm-bg) !important;
  color: var(--cm-text);
}

/* Painéis/caixas principais */
#modal .panel,
#modal .box,
#modal .section,
#modal .modal-section,
#modal .card {
  background: var(--cm-surface);
  border: 1px solid var(--cm-border);
  box-shadow: var(--cm-shadow);
  border-radius: 12px;
}

/* Inputs/áreas internas */
#modal input,
#modal select,
#modal textarea,
#modal .editor,
#modal .ql-container,
#modal .ql-toolbar {
  background: var(--cm-surface-2);
  color: var(--cm-text);
  border-color: var(--cm-border);
}

/* Texto secundário */
#modal .muted,
#modal .help,
#modal small,
#modal label {
  color: var(--cm-muted);
}

/* Tabs */
#modal .tabs,
#modal .tablist,
#modal [role="tablist"] {
  background: transparent;
}

#modal [role="tab"],
#modal .tab,
#modal .tabs button {
  background: transparent;
  border: 1px solid var(--cm-border);
  color: var(--cm-text);
  border-radius: 999px;
}

#modal [role="tab"][aria-selected="true"],
#modal .tab.active,
#modal .tabs button.active {
  background: var(--cm-surface);
}

#modal[data-theme="aero"] .panel,
#modal[data-theme="aero"] .box,
#modal[data-theme="aero"] .section,
#modal[data-theme="aero"] .modal-section,
#modal[data-theme="aero"] .card {
  background: var(--cm-glass-strong);
  backdrop-filter: var(--cm-backdrop);
  -webkit-backdrop-filter: var(--cm-backdrop);
}

#modal[data-theme="aero"] input,
#modal[data-theme="aero"] textarea,
#modal[data-theme="aero"] .ql-container,
#modal[data-theme="aero"] .ql-toolbar {
  background: var(--cm-glass);
  backdrop-filter: var(--cm-backdrop);
  -webkit-backdrop-filter: var(--cm-backdrop);
}












/* ============================================================
   QUILL — obedecer AA (hard override)
   ============================================================ */

/* container snow + editor */
#card-modal-root .ql-snow,
#card-modal-root .ql-snow *{
  font-size: inherit !important;
  line-height: inherit !important;
}

/* editor (onde o texto fica) */
#card-modal-root .ql-snow .ql-editor,
#card-modal-root .ql-snow .ql-editor *{
  font-size: inherit !important;
  line-height: inherit !important;
}

/* toolbar/pickers */
#card-modal-root .ql-snow .ql-toolbar,
#card-modal-root .ql-snow .ql-toolbar *{
  font-size: 0.95em !important;
  line-height: 1.2 !important;
}

/* derruba font-size inline que o Quill coloca em spans */
#card-modal-root .ql-editor [style*="font-size"]{
  font-size: inherit !important;
}

/* fallback pro editor de atividade se Quill ainda não montou */
#card-modal-root #cm-activity-editor,
#card-modal-root #cm-activity-editor *{
  font-size: inherit !important;
  line-height: inherit !important;
}


/* ============================================================
   CM — AA FONT SIZE (ÚNICO BLOCO - FINAL DO ARQUIVO)
   Governança: #card-modal-root[data-font="sm|md|lg"]
   ============================================================ */

#card-modal-root{
  --cm-aa-font-sm: 12px;
  --cm-aa-font-md: 14px;
  --cm-aa-font-lg: 16px;
  --cm-aa-line: 1.55;

  --cm-aa-font: var(--cm-aa-font-sm);
}

#card-modal-root[data-font="md"]{ --cm-aa-font: var(--cm-aa-font-md); }
#card-modal-root[data-font="lg"]{ --cm-aa-font: var(--cm-aa-font-lg); }

/* baseline tipográfico do modal inteiro */
#card-modal-root{
  font-size: var(--cm-aa-font) !important;
  line-height: var(--cm-aa-line) !important;
}

#card-modal-root{
  font-size: var(--cm-aa-font) !important;
  line-height: var(--cm-aa-line) !important;
}

/* Form controls */
#card-modal-root input,
#card-modal-root textarea,
#card-modal-root select,
#card-modal-root button{
  font-size: inherit !important;
  line-height: inherit !important;
}

/* Labels/muted devem escalar */
#card-modal-root .cm-label,
#card-modal-root .cm-muted{
  font-size: 0.92em !important;
  line-height: inherit !important;
}

/* ATIVIDADE: garante herança total */
#card-modal-root .cm-activity,
#card-modal-root #cm-activity-panel,
#card-modal-root #cm-activity-panel *{
  font-size: inherit !important;
  line-height: inherit !important;
}

/* Conteúdo renderizado */
#card-modal-root .cm-activity-content,
#card-modal-root .cm-activity-content *{
  font-size: inherit !important;
  line-height: inherit !important;
}

/* Quill da atividade (Quill fixa px) */
#card-modal-root .cm-activity-quill .ql-editor,
#card-modal-root #cm-activity-editor .ql-editor,
#card-modal-root .cm-activity-quill .ql-container,
#card-modal-root #cm-activity-editor{
  font-size: inherit !important;
  line-height: inherit !important;
}
/* END modal.css */